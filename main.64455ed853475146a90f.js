"use strict";(self.webpackChunktest_string=self.webpackChunktest_string||[]).push([[792],{506:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cursor=this.createCursor()},(n=[{key:"createCursor",value:function(){var e=document.createElement("span");return e.classList.add("text-cursor"),e}},{key:"placeBefore",value:function(e){var t=e.parentNode;t&&"function"==typeof t.insertBefore&&(this.cursor.parentNode&&this.cursor.nextSibling===e||t.insertBefore(this.cursor,e))}},{key:"remove",value:function(){this.cursor.parentNode&&this.cursor.parentNode.removeChild(this.cursor)}},{key:"getCursor",value:function(){return this.cursor}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var a=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectionManager=t,this.messageElement=n,this.cursorManager=new r,this.draggedLetters=[],this.setupEventListeners()},(t=[{key:"setupEventListeners",value:function(){document.body.addEventListener("dragstart",this.handleDragStart.bind(this)),document.body.addEventListener("dragover",this.handleDragOver.bind(this)),document.body.addEventListener("drop",this.handleDrop.bind(this)),document.body.addEventListener("dragend",this.handleDragEnd.bind(this))}},{key:"handleDragStart",value:function(e){var t=this.selectionManager.getSelectedLetters();0!==t.length&&e.target.classList.contains("letter__selected")?(this.draggedLetters=t.map((function(e){return{element:e.element}})).sort((function(e,t){return parseInt(e.element.dataset.index)-parseInt(t.element.dataset.index)})),e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="move",this.draggedLetters.forEach((function(e){return e.element.classList.add("dragging")}))):this.messageElement.textContent="To select, press Ctrl (or Cmd on Mac) + click to multi-select or Ctrl (or Cmd on Mac) + drag to group select."}},{key:"handleDragOver",value:function(e){e.preventDefault();var t=this.findLetterFromPoint(e.clientX,e.clientY);t&&!t.classList.contains("dragging")&&this.cursorManager.placeBefore(t)}},{key:"handleDrop",value:function(e){var t=this;e.preventDefault();var n=this.findLetterFromPoint(e.clientX,e.clientY);if(n&&!n.classList.contains("dragging")){var r=n.parentNode;if(r&&this.draggedLetters.length){if(r.classList.contains("result")||r.classList.contains("dropped-outside"))1===this.draggedLetters.length?this.swapLetters(n,this.draggedLetters[0].element):this.draggedLetters.forEach((function(e){var n=e.element;r.insertBefore(n,t.cursorManager.getCursor())}));else{var o=document.createElement("div");o.classList.add("dropped-outside"),this.draggedLetters.forEach((function(t){var n=t.element,r=n.getBoundingClientRect();o.style.left="".concat(e.clientX-r.width/2,"px"),o.style.top="".concat(e.clientY-r.height/2,"px"),n.removeAttribute("draggable"),o.appendChild(n)})),document.body.appendChild(o)}this.cleanup()}}}},{key:"swapLetters",value:function(e,t){if(e!==t){var n=e.parentNode,r=t.parentNode,o=document.createElement("span"),i=document.createElement("span");n.replaceChild(o,e),r.replaceChild(i,t),n.replaceChild(t,o),r.replaceChild(e,i)}}},{key:"handleDragEnd",value:function(){this.cleanup()}},{key:"cleanup",value:function(){document.querySelectorAll(".dragging").forEach((function(e){return e.classList.remove("dragging")})),this.cursorManager.remove(),this.selectionManager.clearSelection(),this.draggedLetters=[]}},{key:"findLetterFromPoint",value:function(e,t){for(var n=document.elementFromPoint(e,t);n&&!n.classList.contains("letter")&&n!==document.body;)n=n.parentNode;return n}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var f=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectedLetters=[],this.selectionBox=null,this.startX=0,this.startY=0,this.messageElement=t,this.setupEventListeners()},(t=[{key:"setupEventListeners",value:function(){document.body.addEventListener("mousedown",this.handleMouseDown.bind(this)),document.body.addEventListener("mousemove",this.handleMouseMove.bind(this)),document.body.addEventListener("mouseup",this.handleMouseUp.bind(this))}},{key:"handleMouseDown",value:function(e){(e.ctrlKey||e.metaKey)&&(this.toggleLetterSelection(e.target),this.startSelectionBox(e))}},{key:"toggleLetterSelection",value:function(e){if(e.classList.contains("letter")){var t=this.getLetterIndex(e);this.selectedLetters.find((function(e){return e.index===t}))?(this.selectedLetters=this.selectedLetters.filter((function(e){return e.index!==t})),e.classList.remove("letter__selected"),e.removeAttribute("draggable")):(this.selectedLetters.push({text:e.innerText,index:t,element:e}),e.classList.add("letter__selected"),e.setAttribute("draggable","true"))}}},{key:"startSelectionBox",value:function(e){this.selectionBox=document.createElement("div"),this.selectionBox.classList.add("selection-box"),document.body.appendChild(this.selectionBox),this.startX=e.clientX,this.startY=e.clientY,this.updateSelectionBoxPosition(e)}},{key:"handleMouseMove",value:function(e){this.selectionBox&&(this.updateSelectionBoxPosition(e),this.updateLetterSelection())}},{key:"handleMouseUp",value:function(){this.selectionBox&&(document.body.removeChild(this.selectionBox),this.selectionBox=null),this.selectedLetters.length>0&&(this.messageElement.textContent="Drag the symbols to the desired location.")}},{key:"updateSelectionBoxPosition",value:function(e){var t=e.clientX-this.startX,n=e.clientY-this.startY;Object.assign(this.selectionBox.style,{width:"".concat(Math.abs(t),"px"),height:"".concat(Math.abs(n),"px"),left:"".concat(Math.min(e.clientX,this.startX),"px"),top:"".concat(Math.min(e.clientY,this.startY),"px")})}},{key:"updateLetterSelection",value:function(){var e=this,t=this.selectionBox.getBoundingClientRect();document.querySelectorAll(".letter").forEach((function(n){var r=e.getLetterIndex(n),o=n.getBoundingClientRect();o.left>=t.left&&o.right<=t.right&&o.top>=t.top&&o.bottom<=t.bottom?e.selectedLetters.some((function(e){return e.index===r}))||(n.classList.add("letter__selected"),n.setAttribute("draggable","true"),e.selectedLetters.push({text:n.innerText,index:r,element:n})):(n.classList.remove("letter__selected"),n.removeAttribute("draggable"),e.selectedLetters=e.selectedLetters.filter((function(e){return e.index!==r})))}))}},{key:"getLetterIndex",value:function(e){return parseInt(e.dataset.index,10)}},{key:"clearSelection",value:function(){this.selectedLetters.forEach((function(e){return e.element.classList.remove("letter__selected")})),this.selectedLetters=[]}},{key:"getSelectedLetters",value:function(){return function(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.selectedLetters)}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var p=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.messageElement=n},(t=[{key:"render",value:function(e){var t=this;this.clear(),e.trim()&&(this.messageElement.textContent="Press Ctrl (or Cmd on Mac) + click to multi-select or Ctrl (or Cmd on Mac) + drag to group select.",this.container.classList.remove("visually-hidden"),e.split("").forEach((function(e,n){t.container.appendChild(t.createSpan(e,n))})))}},{key:"createSpan",value:function(e,t){var n=document.createElement("span");return n.innerText=e,n.classList.add("letter"),n.dataset.index=t,n}},{key:"clear",value:function(){this.container.innerHTML="",this.container.classList.add("visually-hidden"),this.messageElement.textContent='Enter text and click the "Display" button.',document.querySelectorAll(".dropped-outside").forEach((function(e){e.remove()}))}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}var L=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.button=document.querySelector(".button"),this.textarea=document.querySelector(".input__control"),this.resultContainer=document.querySelector(".result"),this.message=document.querySelector(".message__text"),this.textRenderer=new p(this.resultContainer,this.message),this.selectionManager=new f(this.message),this.dragAndDropManager=new a(this.selectionManager,this.message),this.initializeMessage(),this.setupEventListeners()},(t=[{key:"initializeMessage",value:function(){this.message.textContent='Enter text and click the "Display" button.'}},{key:"setupEventListeners",value:function(){this.button.addEventListener("click",this.handleButtonClick.bind(this))}},{key:"handleButtonClick",value:function(){this.textRenderer.render(this.textarea.value),this.textarea.value=""}}])&&b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListener("DOMContentLoaded",(function(){new L}))}},e=>{e(e.s=506)}]);
//# sourceMappingURL=main.64455ed853475146a90f.js.map